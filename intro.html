<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Dragonfly</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style type="text/css">
        button.gameButton {
            width: 20%;
            height: 20%;
        }
    </style>
</head>
<body onload="i18n.work()">
<h1 align="center" style="color: white">Dragonfly</h1>

<p style="text-align: center">
    <button id="newGame" class="gameButton">
        <p class="buttonTitle i18n">New Game</p>
    </button>
    <br>
    <button id="resumeGame" class="gameButton">
        <p class="buttonTitle i18n">Resume Game</p>
    </button>
    <br>
    <button id="chooseLevel" class="gameButton">
        <p class="buttonTitle i18n">Choose Level</p>
    </button>
</p>
<div class="BLIndicator">
    <p id="levelIndicator"></p>
</div>

<div class="BRIndicator">
    <p id="moneyIndicator"></p>
</div>

<script src="lib/lib.js"></script>
<script src="lib/i18n.js"></script>
<script src="lib/i18n/ru/intro.js"></script>
<script src="lib/message.js"></script>
<script src="lib/level_manager.js"></script>
<script>
    i18n.setLanguage("ru");

    if (!window.localStorage) {
        window.localStorage = [];
    }
    var newGame = document.getElementById("newGame");
    var resumeGame = document.getElementById("resumeGame");
    var chooseLevel = document.getElementById("chooseLevel");

    function openNewGame() {
        localStorage.clear();
        localStorage["maxLevel"] = 0;
        window.open("game.html", "_self");
    }

    newGame.onclick = function () {
        if (localStorage.length > 0) {
            message.confirm(i18n.translate("Do you want to start new game?"), openNewGame);
        } else {
            openNewGame();
        }
    };

    resumeGame.onclick = function () {
        localStorage["lastLevel"] = localStorage["maxLevel"];
        window.open("game.html", "_self");
    };

    chooseLevel.onclick = function () {
        window.open("level.html", "_self");
    }

    updateLevelIndicator(true);
    updateMoneyIndicator(true);
</script>
</body>
</html>
