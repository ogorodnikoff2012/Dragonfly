<!doctype html>
<html>
<head>
    <title>Dragonfly</title>
    <meta charset='utf-8'/>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style type="text/css">

    </style>
    <!--<script src="http://jsconsole.com/remote.js?14265493-79C4-4668-9CFB-C64D1C25DF62"></script>-->
</head>
<body onload="i18n.work()">
<table align="center">
    <tr>
        <td>
            <div style="overflow:auto;" id="fieldWrapper">
                <canvas id="field">Refresh</canvas>
            </div>
        </td>
        <td>
            <!--<div>-->
                <div style="overflow-y:scroll; max-width: 84px" id="availableCommands"></div>
            <!--</div>-->
        </td>
    </tr>
</table>
<table align="center">
    <tr>
        <td style="vertical-align: top">
            <div id="program">
                <table>
                    <tr>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td style="vertical-align: top">
            <div id="controlPanel">
                <center><button id="play" style="background: rgba(0, 0, 0, 0); border-width: 0">
                    <img src="img/controls/play.png" style="width: 64px"/>
                </button>
                <button id="stop" style="background: rgba(0, 0, 0, 0); border-width: 0">
                    <img src="img/controls/stop.png" style="width: 64px"/>
                </button>
                <button id="reset" style="background: rgba(0, 0, 0, 0); border-width: 0">
                    <img src="img/controls/bin.png" style="width: 64px"/>
                </button>
                    <br>
                <button id="backspace" class="i18n" align="top" style="visibility: hidden">
                    Remove<br>selected<br>command
                </button></center>
            </div>
        </td>
    </tr>
</table>
<button class="gameButton" style="position: absolute; top: 0; left: 0" onclick="window.open('intro.html', '_self')">
    <p class="i18n">Main menu</p>
</button>

<div class="BLIndicator">
    <p id="levelIndicator"></p>
</div>

<div class="BRIndicator">
    <p id="moneyIndicator"></p>
</div>

<script src="lib/lib.js"></script>
<script src="lib/cell.js"></script>
<script src="lib/actor.js"></script>
<script src="lib/program.js"></script>
<script src="lib/field.js"></script>
<script src="lib/dnd.js"></script>
<script src="lib/controls.js"></script>
<script src="lib/level.js"></script>
<script src="lib/coin.js"></script>
<script src="lib/message.js"></script>
<script src="lib/i18n.js"></script>
<script src="lib/i18n/ru/game.js"></script>
<script src="lib/level_manager.js"></script>
<script>
    if (!('lang' in localStorage)) {
        localStorage['lang'] = 'ru';
    }
    i18n.setLanguage(localStorage['lang']);

    var l = levelManager.getNextLevel();
    if (!l) {
        message.alert("<h1>" + i18n.translate("You have passed all levels!") + "</h1>", function () {
            window.open("intro.html", "_self");
        });
    } else {
        includeJS("lib/levels/level_" + l + ".js");
        includeJS("start_game.js");
    }
</script>
</body>
</html>
