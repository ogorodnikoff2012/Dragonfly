<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Dragonfly</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style type="text/css">

    </style>
</head>
<body onload="i18n.work()">
<h1 align="center" style="color: white" class="i18n">Choose level</h1>
<table align="center" id="levels"></table>

<div class="BRIndicator">
    <p id="moneyIndicator"></p>
</div>

<button class="gameButton" style="position: absolute; top: 0px; left: 0px" onclick="window.open('intro.html', '_self')">
    <p class="i18n">Main menu</p>
</button>

<script src="lib/lib.js"></script>
<script src="lib/i18n.js"></script>
<script src="lib/i18n/ru/level.js"></script>
<script src="lib/message.js"></script>
<script src="lib/level_manager.js"></script>
<script src="lib/table_maker.js"></script>
<script>
    i18n.setLanguage("ru");

    var maxLevel = +localStorage["maxLevel"];

    function onClick(i) {
        return function () {
            localStorage["lastLevel"] = i;
            window.open("game.html", "_self");
        };
    };

    var tableMaker = new TableMaker(5, document.getElementById("levels"));

    for(var i = 0; i < levelManager.numOfLevels; i++) {
        var button = document.createElement("button");
        /*    <button id="resumeGame" class="gameButton">
         <p class="buttonTitle i18n">Resume Game

         </p>*/
        addClass(button, "gameButton");
        if(i > maxLevel) {
            addClass(button, "disabled");
            button.setAttribute("disabled", true);
        }
        var p = document.createElement("p");
        addClass(p, "buttonTitle");
        p.innerHTML = i18n.translate("Level") + " " + (i + 1);
        button.appendChild(p);
        button.onclick = onClick(i);
        tableMaker.addButton(button);
    }

    //updateLevelIndicator(true);
    updateMoneyIndicator(true);
</script>
</body>
</html>